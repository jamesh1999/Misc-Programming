Optimizer starting...

Opening test.al
Opened

Reading file:
0    : //Setup assembly
1    : import setup
2    : import print
3    : Add SP 8
4    : //Start program
5    : Add $261 ZERO ZERO
6    : Add $262 ZERO ZERO
7    : Goto :ANCHOR_0
8    : >fact
9    : Add SP 12
10   : Add $39 ZERO 1
11   : Mov $38 $39
12   : Mov $37 $38
13   : Mov $36 $37
14   : Mov $35 $36
15   : Mov $34 $35
16   : Mov $33 $34
17   : Mov $32 $33
18   : Mov $31 $32
19   : Mov $30 $31
20   : Mov $29 $30
21   : Mov $28 $29
22   : Mov $27 $28
23   : Mov $263 $27
24   : Sw $263 FP + 4
25   : Lw $264 FP + 0
26   : Mov $61 $264
27   : Mov $60 $61
28   : Mov $59 $60
29   : Mov $58 $59
30   : Mov $57 $58
31   : Mov $56 $57
32   : Mov $55 $56
33   : Mov $54 $55
34   : Mov $53 $54
35   : Mov $52 $53
36   : Mov $51 $52
37   : Mov $50 $51
38   : Mov $49 $50
39   : Mov $265 $49
40   : Sw $265 FP + 8
41   : :ANCHOR_1
42   : Lw $266 FP + 8
43   : Mov $76 $266
44   : Mov $75 $76
45   : Mov $74 $75
46   : Mov $73 $74
47   : Mov $72 $73
48   : Mov $71 $72
49   : Mov $70 $71
50   : Mov $69 $70
51   : Add $85 ZERO 1
52   : Mov $84 $85
53   : Mov $83 $84
54   : Mov $82 $83
55   : Mov $81 $82
56   : Mov $80 $81
57   : Mov $79 $80
58   : Branch ($69 > $79) :ANCHOR_3
59   : Mov $68 ZERO
60   : Goto :ANCHOR_4
61   : :ANCHOR_3
62   : Not $68 ZERO
63   : :ANCHOR_4
64   : Mov $67 $68
65   : Mov $66 $67
66   : Mov $65 $66
67   : Mov $64 $65
68   : Mov $63 $64
69   : Branch ($63 == ZERO) :ANCHOR_2
70   : Lw $268 FP + 8
71   : Mov $122 $268
72   : Mov $121 $122
73   : Mov $120 $121
74   : Mov $119 $120
75   : Mov $118 $119
76   : Mov $117 $118
77   : Mov $116 $117
78   : Mov $115 $116
79   : Mov $114 $115
80   : Mov $113 $114
81   : Mov $112 $113
82   : Mov $111 $112
83   : Mov $110 $111
84   : Lw $269 FP + 4
85   : Mul $269 $110
86   : Sw $269 FP + 4
87   : Add $103 ZERO 1
88   : Mov $102 $103
89   : Mov $101 $102
90   : Mov $100 $101
91   : Mov $99 $100
92   : Mov $98 $99
93   : Mov $97 $98
94   : Mov $96 $97
95   : Mov $95 $96
96   : Mov $94 $95
97   : Mov $93 $94
98   : Mov $92 $93
99   : Mov $91 $92
100  : Lw $267 FP + 8
101  : Sub $267 $91
102  : Sw $267 FP + 8
103  : Goto :ANCHOR_1
104  : :ANCHOR_2
105  : Lw $270 FP + 4
106  : Mov $139 $270
107  : Mov $138 $139
108  : Mov $137 $138
109  : Mov $136 $137
110  : Mov $135 $136
111  : Mov $134 $135
112  : Mov $133 $134
113  : Mov $132 $133
114  : Mov $131 $132
115  : Mov $130 $131
116  : Mov $129 $130
117  : Mov $128 $129
118  : Mov $127 $128
119  : Sub SP 12
120  : Sw $127 FP + 0
121  : Ret
122  : Sub SP 12
123  : :ANCHOR_0
124  : Mov $4 $5
125  : Mov $3 $4
126  : Goto :ANCHOR_5
127  : >main
128  : Add SP 12
129  : Add $171 ZERO 0
130  : Mov $170 $171
131  : Mov $169 $170
132  : Mov $168 $169
133  : Mov $167 $168
134  : Mov $166 $167
135  : Mov $165 $166
136  : Mov $164 $165
137  : Mov $163 $164
138  : Mov $162 $163
139  : Mov $161 $162
140  : Mov $160 $161
141  : Mov $159 $160
142  : Mov $271 $159
143  : Sw $271 FP + 8
144  : :ANCHOR_6
145  : Lw $272 FP + 8
146  : Mov $186 $272
147  : Mov $185 $186
148  : Mov $184 $185
149  : Mov $183 $184
150  : Mov $182 $183
151  : Mov $181 $182
152  : Mov $180 $181
153  : Mov $179 $180
154  : Add $195 ZERO 3
155  : Mov $194 $195
156  : Mov $193 $194
157  : Mov $192 $193
158  : Mov $191 $192
159  : Mov $190 $191
160  : Mov $189 $190
161  : Branch ($179 < $189) :ANCHOR_8
162  : Mov $178 ZERO
163  : Goto :ANCHOR_9
164  : :ANCHOR_8
165  : Not $178 ZERO
166  : :ANCHOR_9
167  : Mov $177 $178
168  : Mov $176 $177
169  : Mov $175 $176
170  : Mov $174 $175
171  : Mov $173 $174
172  : Branch ($173 == ZERO) :ANCHOR_7
173  : Lw $274 FP + 8
174  : Mov $218 $274
175  : Push $218
176  : Call :print_d
177  : Add $213 ZERO 1
178  : Mov $212 $213
179  : Mov $211 $212
180  : Mov $210 $211
181  : Mov $209 $210
182  : Mov $208 $209
183  : Mov $207 $208
184  : Mov $206 $207
185  : Mov $205 $206
186  : Mov $204 $205
187  : Mov $203 $204
188  : Mov $202 $203
189  : Mov $201 $202
190  : Lw $273 FP + 8
191  : Add $273 $201
192  : Sw $273 FP + 8
193  : Goto :ANCHOR_6
194  : :ANCHOR_7
195  : Mov $275 SP
196  : Add SP 8
197  : Add $251 ZERO 3
198  : Mov $250 $251
199  : Mov $249 $250
200  : Mov $248 $249
201  : Mov $247 $248
202  : Mov $246 $247
203  : Mov $245 $246
204  : Mov $244 $245
205  : Mov $243 $244
206  : Mov $242 $243
207  : Mov $241 $242
208  : Mov $240 $241
209  : Mov $239 $240
210  : Push $239
211  : Mov SP $275
212  : Call :fact
213  : Lw $236 SP + 12
214  : Mov $235 $236
215  : Mov $234 $235
216  : Mov $233 $234
217  : Mov $232 $233
218  : Mov $231 $232
219  : Add $258 ZERO 6
220  : Mov $257 $258
221  : Mov $256 $257
222  : Mov $255 $256
223  : Mov $254 $255
224  : Add $230 $231 $254
225  : Mov $229 $230
226  : Mov $228 $229
227  : Mov $227 $228
228  : Mov $226 $227
229  : Mov $225 $226
230  : Mov $224 $225
231  : Mov $223 $224
232  : Sub SP 12
233  : Sw $223 FP + 0
234  : Ret
235  : Sub SP 12
236  : :ANCHOR_5
237  : Mov $2 $3
238  : //Call program
239  : Call :main
240  : //Print result
241  : Lw $276 SP + 12
242  : Add $277 SP 4
243  : Set $278 'M'
244  : Push $278
245  : Set $278 'a'
246  : Push $278
247  : Set $278 'i'
248  : Push $278
249  : Set $278 'n'
250  : Push $278
251  : Set $278 ' '
252  : Push $278
253  : Set $278 'e'
254  : Push $278
255  : Set $278 'x'
256  : Push $278
257  : Set $278 'i'
258  : Push $278
259  : Set $278 't'
260  : Push $278
261  : Set $278 'e'
262  : Push $278
263  : Set $278 'd'
264  : Push $278
265  : Set $278 ' '
266  : Push $278
267  : Set $278 'w'
268  : Push $278
269  : Set $278 'i'
270  : Push $278
271  : Set $278 't'
272  : Push $278
273  : Set $278 'h'
274  : Push $278
275  : Set $278 ' '
276  : Push $278
277  : Set $278 'c'
278  : Push $278
279  : Set $278 'o'
280  : Push $278
281  : Set $278 'd'
282  : Push $278
283  : Set $278 'e'
284  : Push $278
285  : Set $278 ':'
286  : Push $278
287  : Set $278 ' '
288  : Push $278, ZERO, $277
289  : Call :print_str
290  : Sub SP $277 4
291  : Push $276
292  : Call :print_d
293  : Mov $0 $2
294  : Sub SP 8
295  : Halt
296  : 
Read

Beginning optimizations...

Starting basic optimizations...
Removing redundant MOV instructions...
	Removed 161 MOV instructions
Done

Removing unused instructions...
	Removed 2 instructions
Done

Finished

Finished optimizing:
0    : import setup
1    : import print
2    : Add SP 8
3    : Goto : ANCHOR_0
4    : > fact
5    : Add SP 12
6    : Add $39 ZERO 1
7    : Sw $39 FP + 4
8    : Lw $264 FP + 0
9    : Sw $264 FP + 8
10   : : ANCHOR_1
11   : Lw $266 FP + 8
12   : Add $85 ZERO 1
13   : Branch $266 > $85 : ANCHOR_3
14   : Mov $68 ZERO
15   : Goto : ANCHOR_4
16   : : ANCHOR_3
17   : Not $68 ZERO
18   : : ANCHOR_4
19   : Branch $68 == ZERO : ANCHOR_2
20   : Lw $268 FP + 8
21   : Lw $269 FP + 4
22   : Mul $269 $268
23   : Sw $269 FP + 4
24   : Add $103 ZERO 1
25   : Lw $267 FP + 8
26   : Sub $267 $103
27   : Sw $267 FP + 8
28   : Goto : ANCHOR_1
29   : : ANCHOR_2
30   : Lw $270 FP + 4
31   : Sub SP 12
32   : Sw $270 FP + 0
33   : Ret
34   : Sub SP 12
35   : : ANCHOR_0
36   : Goto : ANCHOR_5
37   : > main
38   : Add SP 12
39   : Add $171 ZERO 0
40   : Sw $171 FP + 8
41   : : ANCHOR_6
42   : Lw $272 FP + 8
43   : Add $195 ZERO 3
44   : Branch $272 < $195 : ANCHOR_8
45   : Mov $178 ZERO
46   : Goto : ANCHOR_9
47   : : ANCHOR_8
48   : Not $178 ZERO
49   : : ANCHOR_9
50   : Branch $178 == ZERO : ANCHOR_7
51   : Lw $274 FP + 8
52   : Push $274
53   : Call : print_d
54   : Add $213 ZERO 1
55   : Lw $273 FP + 8
56   : Add $273 $213
57   : Sw $273 FP + 8
58   : Goto : ANCHOR_6
59   : : ANCHOR_7
60   : Mov $275 SP
61   : Add SP 8
62   : Add $251 ZERO 3
63   : Push $251
64   : Mov SP $275
65   : Call : fact
66   : Lw $236 SP + 12
67   : Add $258 ZERO 6
68   : Add $230 $236 $258
69   : Sub SP 12
70   : Sw $230 FP + 0
71   : Ret
72   : Sub SP 12
73   : : ANCHOR_5
74   : Call : main
75   : Lw $276 SP + 12
76   : Add $277 SP 4
77   : Set $278 77
78   : Push $278
79   : Set $278 97
80   : Push $278
81   : Set $278 105
82   : Push $278
83   : Set $278 110
84   : Push $278
85   : Set $278 32
86   : Push $278
87   : Set $278 101
88   : Push $278
89   : Set $278 120
90   : Push $278
91   : Set $278 105
92   : Push $278
93   : Set $278 116
94   : Push $278
95   : Set $278 101
96   : Push $278
97   : Set $278 100
98   : Push $278
99   : Set $278 32
100  : Push $278
101  : Set $278 119
102  : Push $278
103  : Set $278 105
104  : Push $278
105  : Set $278 116
106  : Push $278
107  : Set $278 104
108  : Push $278
109  : Set $278 32
110  : Push $278
111  : Set $278 99
112  : Push $278
113  : Set $278 111
114  : Push $278
115  : Set $278 100
116  : Push $278
117  : Set $278 101
118  : Push $278
119  : Set $278 58
120  : Push $278
121  : Set $278 32
122  : Push $278 ZERO $277
123  : Call : print_str
124  : Sub SP $277 4
125  : Push $276
126  : Call : print_d
127  : Sub SP 8
128  : Halt

Reduced assembly by 168 instructions (56.56%)

Saving test.al
Saved

